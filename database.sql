-- phpMyAdmin SQL Dump
-- Joyboo
-- version 1.0
-- https://vveq.com/
-- Generation Time: 2018-12-15 17:10:25

-- 开启事务
START TRANSACTION;

--
-- Database: `vveq`
--
CREATE DATABASE IF NOT EXISTS `vveq` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;

USE `vveq`;

-- --------------------------------------------------------

--
-- 表的结构
--
CREATE TABLE IF NOT EXISTS `user` (
  `id` int UNSIGNED NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL DEFAULT '' COMMENT '账号',
  `nickname` varchar(20) NOT NULL DEFAULT '' COMMENT '昵称',
  `tel` varchar(20) NOT NULL DEFAULT '' COMMENT '电话',
  `password` varchar(255) NOT NULL DEFAULT '' COMMENT '密码',
  `email` varchar(50) NOT NULL DEFAULT '' COMMENT 'email地址',
  `avatar` varchar(255) NOT NULL DEFAULT '' COMMENT '头像',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '状态，1-正常，2封禁',
  `instime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '注册时间',
  `updtime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '修改时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户表';


CREATE TABLE IF NOT EXISTS `dau` (
  `id` int UNSIGNED AUTO_INCREMENT NOT NULL,
  `uid` int UNSIGNED NOT NULL COMMENT '用户id',
  `ip` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT '登录ip',
  `instime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '登录时间',
  PRIMARY KEY (`id`,`instime`),
  KEY `uid` (`uid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户登录表'
PARTITION BY RANGE (TO_DAYS (instime))
(
PARTITION p2018 VALUES LESS THAN (TO_DAYS('2019-01-01')) ENGINE=InnoDB COMMENT='2018年',
PARTITION p2019 VALUES LESS THAN (TO_DAYS('2020-01-01')) ENGINE=InnoDB COMMENT='2019年',
PARTITION p2020 VALUES LESS THAN (TO_DAYS('2021-01-01')) ENGINE=InnoDB COMMENT='2020年',
PARTITION p2021 VALUES LESS THAN (TO_DAYS('2022-01-01')) ENGINE=InnoDB COMMENT='2021年',
PARTITION p2022 VALUES LESS THAN (TO_DAYS('2023-01-01')) ENGINE=InnoDB COMMENT='2022年',
PARTITION p2023 VALUES LESS THAN (TO_DAYS('2024-01-01')) ENGINE=InnoDB COMMENT='2023年',
PARTITION p2024 VALUES LESS THAN (TO_DAYS('2025-01-01')) ENGINE=InnoDB COMMENT='2024年',
PARTITION p2025 VALUES LESS THAN (TO_DAYS('2026-01-01')) ENGINE=InnoDB COMMENT='2025年',
PARTITION pmax VALUES LESS THAN MAXVALUE
);

CREATE TABLE IF NOT EXISTS `cate` (
  `id` smallint(5) UNSIGNED NOT NULL AUTO_INCREMENT,
  `pid` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '父级id',
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT '分类名称',
  `sort` tinyint UNSIGNED NOT NULL DEFAULT 0 COMMENT '排序',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '1：显示,0：隐藏',
  `insuid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加用户id',
  `instime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '添加时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='分类表';

CREATE TABLE IF NOT EXISTS `tag` (
  `id` smallint(5) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT '标签名称',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '1：正常,0：禁用',
  `insuid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加用户id',
  `instime` int UNSIGNED NOT NULL DEFAULT '0' COMMENT '添加时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='标签';

CREATE TABLE IF NOT EXISTS `theme` (
  `id` int UNSIGNED NOT NULL AUTO_INCREMENT,
  `cid` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '分类id',
  `title` varchar(100) NOT NULL DEFAULT '' COMMENT '标题',
  `content` text NOT NULL COMMENT '内容',
  `uid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '用户id',
  `click` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '点击',
  `like` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '点赞',
  `tagid` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '标签id',
  `sort` tinyint UNSIGNED NOT NULL DEFAULT 0 COMMENT '排序',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '1：正常,0：删除',
  `instime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '添加时间',
  PRIMARY KEY (`id`,`instime`),
  KEY `cid` (`cid`),
  KEY `uid` (`uid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='主题'
PARTITION BY RANGE (TO_DAYS (instime))
(
PARTITION p2018 VALUES LESS THAN (TO_DAYS('2019-01-01')) ENGINE=InnoDB COMMENT='2018年',
PARTITION p201901 VALUES LESS THAN (TO_DAYS('2019-02-01')) ENGINE=InnoDB COMMENT='2019年01月',
PARTITION p201902 VALUES LESS THAN (TO_DAYS('2019-03-01')) ENGINE=InnoDB COMMENT='2019年02月',
PARTITION p201903 VALUES LESS THAN (TO_DAYS('2019-04-01')) ENGINE=InnoDB COMMENT='2019年03月',
PARTITION p201904 VALUES LESS THAN (TO_DAYS('2019-05-01')) ENGINE=InnoDB COMMENT='2019年04月',
PARTITION p201905 VALUES LESS THAN (TO_DAYS('2019-06-01')) ENGINE=InnoDB COMMENT='2019年05月',
PARTITION p201906 VALUES LESS THAN (TO_DAYS('2019-07-01')) ENGINE=InnoDB COMMENT='2019年06月',
PARTITION p201907 VALUES LESS THAN (TO_DAYS('2019-08-01')) ENGINE=InnoDB COMMENT='2019年07月',
PARTITION p201908 VALUES LESS THAN (TO_DAYS('2019-09-01')) ENGINE=InnoDB COMMENT='2019年08月',
PARTITION p201909 VALUES LESS THAN (TO_DAYS('2019-10-01')) ENGINE=InnoDB COMMENT='2019年09月',
PARTITION p201910 VALUES LESS THAN (TO_DAYS('2019-11-01')) ENGINE=InnoDB COMMENT='2019年10月',
PARTITION p201911 VALUES LESS THAN (TO_DAYS('2019-12-01')) ENGINE=InnoDB COMMENT='2019年11月',
PARTITION p201912 VALUES LESS THAN (TO_DAYS('2020-01-01')) ENGINE=InnoDB COMMENT='2019年12月',
PARTITION p202001 VALUES LESS THAN (TO_DAYS('2020-02-01')) ENGINE=InnoDB COMMENT='2020年01月',
PARTITION p202002 VALUES LESS THAN (TO_DAYS('2020-03-01')) ENGINE=InnoDB COMMENT='2020年02月',
PARTITION p202003 VALUES LESS THAN (TO_DAYS('2020-04-01')) ENGINE=InnoDB COMMENT='2020年03月',
PARTITION p202004 VALUES LESS THAN (TO_DAYS('2020-05-01')) ENGINE=InnoDB COMMENT='2020年04月',
PARTITION p202005 VALUES LESS THAN (TO_DAYS('2020-06-01')) ENGINE=InnoDB COMMENT='2020年05月',
PARTITION p202006 VALUES LESS THAN (TO_DAYS('2020-07-01')) ENGINE=InnoDB COMMENT='2020年06月',
PARTITION p202007 VALUES LESS THAN (TO_DAYS('2020-08-01')) ENGINE=InnoDB COMMENT='2020年07月',
PARTITION p202008 VALUES LESS THAN (TO_DAYS('2020-09-01')) ENGINE=InnoDB COMMENT='2020年08月',
PARTITION p202009 VALUES LESS THAN (TO_DAYS('2020-10-01')) ENGINE=InnoDB COMMENT='2020年09月',
PARTITION p202010 VALUES LESS THAN (TO_DAYS('2020-11-01')) ENGINE=InnoDB COMMENT='2020年10月',
PARTITION p202011 VALUES LESS THAN (TO_DAYS('2020-12-01')) ENGINE=InnoDB COMMENT='2020年11月',
PARTITION p202012 VALUES LESS THAN (TO_DAYS('2021-01-01')) ENGINE=InnoDB COMMENT='2020年12月',
PARTITION p202101 VALUES LESS THAN (TO_DAYS('2021-02-01')) ENGINE=InnoDB COMMENT='2021年01月',
PARTITION p202102 VALUES LESS THAN (TO_DAYS('2021-03-01')) ENGINE=InnoDB COMMENT='2021年02月',
PARTITION p202103 VALUES LESS THAN (TO_DAYS('2021-04-01')) ENGINE=InnoDB COMMENT='2021年03月',
PARTITION p202104 VALUES LESS THAN (TO_DAYS('2021-05-01')) ENGINE=InnoDB COMMENT='2021年04月',
PARTITION p202105 VALUES LESS THAN (TO_DAYS('2021-06-01')) ENGINE=InnoDB COMMENT='2021年05月',
PARTITION p202106 VALUES LESS THAN (TO_DAYS('2021-07-01')) ENGINE=InnoDB COMMENT='2021年06月',
PARTITION p202107 VALUES LESS THAN (TO_DAYS('2021-08-01')) ENGINE=InnoDB COMMENT='2021年07月',
PARTITION p202108 VALUES LESS THAN (TO_DAYS('2021-09-01')) ENGINE=InnoDB COMMENT='2021年08月',
PARTITION p202109 VALUES LESS THAN (TO_DAYS('2021-10-01')) ENGINE=InnoDB COMMENT='2021年09月',
PARTITION p202110 VALUES LESS THAN (TO_DAYS('2021-11-01')) ENGINE=InnoDB COMMENT='2021年10月',
PARTITION p202111 VALUES LESS THAN (TO_DAYS('2021-12-01')) ENGINE=InnoDB COMMENT='2021年11月',
PARTITION p202112 VALUES LESS THAN (TO_DAYS('2022-01-01')) ENGINE=InnoDB COMMENT='2021年12月',
PARTITION pmax VALUES LESS THAN MAXVALUE
);

CREATE TABLE IF NOT EXISTS `comment` (
  `id` int UNSIGNED NOT NULL AUTO_INCREMENT,
  `tid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '主题id',
  `uid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '用户id',
  `content` text NOT NULL COMMENT '内容',
  `like` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '点赞',
  `instime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT '回复时间',
  PRIMARY KEY (`id`,`instime`),
  KEY `tid` (`tid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='回复'
PARTITION BY RANGE (TO_DAYS (instime))
(
PARTITION p2018 VALUES LESS THAN (TO_DAYS('2019-01-01')) ENGINE=InnoDB COMMENT='2018年',
PARTITION p201901 VALUES LESS THAN (TO_DAYS('2019-02-01')) ENGINE=InnoDB COMMENT='2019年01月',
PARTITION p201902 VALUES LESS THAN (TO_DAYS('2019-03-01')) ENGINE=InnoDB COMMENT='2019年02月',
PARTITION p201903 VALUES LESS THAN (TO_DAYS('2019-04-01')) ENGINE=InnoDB COMMENT='2019年03月',
PARTITION p201904 VALUES LESS THAN (TO_DAYS('2019-05-01')) ENGINE=InnoDB COMMENT='2019年04月',
PARTITION p201905 VALUES LESS THAN (TO_DAYS('2019-06-01')) ENGINE=InnoDB COMMENT='2019年05月',
PARTITION p201906 VALUES LESS THAN (TO_DAYS('2019-07-01')) ENGINE=InnoDB COMMENT='2019年06月',
PARTITION p201907 VALUES LESS THAN (TO_DAYS('2019-08-01')) ENGINE=InnoDB COMMENT='2019年07月',
PARTITION p201908 VALUES LESS THAN (TO_DAYS('2019-09-01')) ENGINE=InnoDB COMMENT='2019年08月',
PARTITION p201909 VALUES LESS THAN (TO_DAYS('2019-10-01')) ENGINE=InnoDB COMMENT='2019年09月',
PARTITION p201910 VALUES LESS THAN (TO_DAYS('2019-11-01')) ENGINE=InnoDB COMMENT='2019年10月',
PARTITION p201911 VALUES LESS THAN (TO_DAYS('2019-12-01')) ENGINE=InnoDB COMMENT='2019年11月',
PARTITION p201912 VALUES LESS THAN (TO_DAYS('2020-01-01')) ENGINE=InnoDB COMMENT='2019年12月',
PARTITION p202001 VALUES LESS THAN (TO_DAYS('2020-02-01')) ENGINE=InnoDB COMMENT='2020年01月',
PARTITION p202002 VALUES LESS THAN (TO_DAYS('2020-03-01')) ENGINE=InnoDB COMMENT='2020年02月',
PARTITION p202003 VALUES LESS THAN (TO_DAYS('2020-04-01')) ENGINE=InnoDB COMMENT='2020年03月',
PARTITION p202004 VALUES LESS THAN (TO_DAYS('2020-05-01')) ENGINE=InnoDB COMMENT='2020年04月',
PARTITION p202005 VALUES LESS THAN (TO_DAYS('2020-06-01')) ENGINE=InnoDB COMMENT='2020年05月',
PARTITION p202006 VALUES LESS THAN (TO_DAYS('2020-07-01')) ENGINE=InnoDB COMMENT='2020年06月',
PARTITION p202007 VALUES LESS THAN (TO_DAYS('2020-08-01')) ENGINE=InnoDB COMMENT='2020年07月',
PARTITION p202008 VALUES LESS THAN (TO_DAYS('2020-09-01')) ENGINE=InnoDB COMMENT='2020年08月',
PARTITION p202009 VALUES LESS THAN (TO_DAYS('2020-10-01')) ENGINE=InnoDB COMMENT='2020年09月',
PARTITION p202010 VALUES LESS THAN (TO_DAYS('2020-11-01')) ENGINE=InnoDB COMMENT='2020年10月',
PARTITION p202011 VALUES LESS THAN (TO_DAYS('2020-12-01')) ENGINE=InnoDB COMMENT='2020年11月',
PARTITION p202012 VALUES LESS THAN (TO_DAYS('2021-01-01')) ENGINE=InnoDB COMMENT='2020年12月',
PARTITION p202101 VALUES LESS THAN (TO_DAYS('2021-02-01')) ENGINE=InnoDB COMMENT='2021年01月',
PARTITION p202102 VALUES LESS THAN (TO_DAYS('2021-03-01')) ENGINE=InnoDB COMMENT='2021年02月',
PARTITION p202103 VALUES LESS THAN (TO_DAYS('2021-04-01')) ENGINE=InnoDB COMMENT='2021年03月',
PARTITION p202104 VALUES LESS THAN (TO_DAYS('2021-05-01')) ENGINE=InnoDB COMMENT='2021年04月',
PARTITION p202105 VALUES LESS THAN (TO_DAYS('2021-06-01')) ENGINE=InnoDB COMMENT='2021年05月',
PARTITION p202106 VALUES LESS THAN (TO_DAYS('2021-07-01')) ENGINE=InnoDB COMMENT='2021年06月',
PARTITION p202107 VALUES LESS THAN (TO_DAYS('2021-08-01')) ENGINE=InnoDB COMMENT='2021年07月',
PARTITION p202108 VALUES LESS THAN (TO_DAYS('2021-09-01')) ENGINE=InnoDB COMMENT='2021年08月',
PARTITION p202109 VALUES LESS THAN (TO_DAYS('2021-10-01')) ENGINE=InnoDB COMMENT='2021年09月',
PARTITION p202110 VALUES LESS THAN (TO_DAYS('2021-11-01')) ENGINE=InnoDB COMMENT='2021年10月',
PARTITION p202111 VALUES LESS THAN (TO_DAYS('2021-12-01')) ENGINE=InnoDB COMMENT='2021年11月',
PARTITION p202112 VALUES LESS THAN (TO_DAYS('2022-01-01')) ENGINE=InnoDB COMMENT='2021年12月',
PARTITION pmax VALUES LESS THAN MAXVALUE
);

-- 消息管理


COMMIT;