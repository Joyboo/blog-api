-- phpMyAdmin SQL Dump
-- Joyboo
-- version 1.0
-- https://vveq.com/
-- Generation Time: 2018-12-15 17:10:25

--
-- Database: `vveq`
--
CREATE DATABASE IF NOT EXISTS vveq CHARACTER SET UTF8;

USE `vveq`;

-- --------------------------------------------------------

--
-- 表的结构
--
CREATE TABLE IF NOT EXISTS `user` (
  `id` int UNSIGNED NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL DEFAULT '' COMMENT '账号',
  `nickname` varchar(20) NOT NULL DEFAULT '' COMMENT '昵称',
  `tel` varchar(20) NOT NULL DEFAULT '' COMMENT '电话',
  `password` varchar(255) NOT NULL DEFAULT '' COMMENT '密码',
  `email` varchar(50) NOT NULL DEFAULT '' COMMENT 'email地址',
  `avatar` varchar(255) NOT NULL DEFAULT '' COMMENT '头像',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '状态，1-正常，2封禁',
  `instime` int(10) UNSIGNED NOT NULL COMMENT '注册时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户表';


CREATE TABLE IF NOT EXISTS `dau` (
  `id` int UNSIGNED AUTO_INCREMENT NOT NULL,
  `uid` int UNSIGNED NOT NULL COMMENT '用户id',
  `ip` bigint(20) UNSIGNED NOT NULL DEFAULT 0 COMMENT '登录ip',
  `instime` int(10) UNSIGNED NOT NULL COMMENT '登录时间',
  PRIMARY KEY (`id`,`instime`),
  KEY `uid` (`uid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户登录表'
PARTITION BY RANGE (instime)
(
PARTITION p2018 VALUES LESS THAN (1546272000) ENGINE=InnoDB COMMENT='2018年',
PARTITION p2019 VALUES LESS THAN (1577808000) ENGINE=InnoDB COMMENT='2019年',
PARTITION p2020 VALUES LESS THAN (1609430400) ENGINE=InnoDB COMMENT='2020年',
PARTITION p2021 VALUES LESS THAN (1640966400) ENGINE=InnoDB COMMENT='2021年',
PARTITION p2022 VALUES LESS THAN (1672502400) ENGINE=InnoDB COMMENT='2022年',
PARTITION p2023 VALUES LESS THAN (1704038400) ENGINE=InnoDB COMMENT='2023年',
PARTITION p2024 VALUES LESS THAN (1735660800) ENGINE=InnoDB COMMENT='2024年',
PARTITION p2025 VALUES LESS THAN (1767196800) ENGINE=InnoDB COMMENT='2025年',
PARTITION p2026 VALUES LESS THAN (1798732800) ENGINE=InnoDB COMMENT='2026年',
PARTITION p2027 VALUES LESS THAN (1830268800) ENGINE=InnoDB COMMENT='2027年',
PARTITION p2028 VALUES LESS THAN (1861891200) ENGINE=InnoDB COMMENT='2028年',
PARTITION pmax VALUES LESS THAN MAXVALUE
);

CREATE TABLE IF NOT EXISTS `cate` (
  `id` smallint(5) UNSIGNED NOT NULL AUTO_INCREMENT,
  `pid` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '父级id',
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT '分类名称',
  `sort` tinyint UNSIGNED NOT NULL DEFAULT 0 COMMENT '排序',
  `route` varchar(30) NOT NULL DEFAULT '' COMMENT '前端路由',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '1：显示,0：隐藏',
  `insuid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加用户id',
  `instime` int(10) UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加时间',
  `upduid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '修改用户id',
  `updtime` int(10) UNSIGNED NOT NULL DEFAULT 0 COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='分类表';

CREATE TABLE IF NOT EXISTS `tag` (
  `id` smallint(5) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT '标签名称',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '1：正常,0：禁用',
  `insuid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加用户id',
  `instime` int(10) UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='标签';

CREATE TABLE IF NOT EXISTS `theme` (
  `id` int UNSIGNED NOT NULL AUTO_INCREMENT,
  `cid` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '分类id',
  `title` varchar(100) NOT NULL DEFAULT '' COMMENT '标题',
  `content` text NOT NULL COMMENT '内容',
  `uid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '用户id',
  `click` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '点击',
  `like` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '点赞',
  `tagid` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '标签id',
  `sort` tinyint UNSIGNED NOT NULL DEFAULT 0 COMMENT '排序',
  `instime` int(10) NOT NULL DEFAULT 0 COMMENT '添加时间',
  `status` tinyint(2) UNSIGNED NOT NULL DEFAULT 1 COMMENT '1：正常,0：删除',
  `lastreplytime` int(10) NOT NULL DEFAULT 0 COMMENT '最后回复时间',
  PRIMARY KEY (`id`,`instime`),
  KEY `cid` (`cid`),
  KEY `uid` (`uid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='主题'
PARTITION BY RANGE (instime)
(
PARTITION p2018 VALUES LESS THAN (1546272000) ENGINE=InnoDB COMMENT='2018年',
PARTITION p201901 VALUES LESS THAN (1548950400) ENGINE=InnoDB COMMENT='2019年01月',
PARTITION p201902 VALUES LESS THAN (1551369600) ENGINE=InnoDB COMMENT='2019年02月',
PARTITION p201903 VALUES LESS THAN (1554048000) ENGINE=InnoDB COMMENT='2019年03月',
PARTITION p201904 VALUES LESS THAN (1556640000) ENGINE=InnoDB COMMENT='2019年04月',
PARTITION p201905 VALUES LESS THAN (1559318400) ENGINE=InnoDB COMMENT='2019年05月',
PARTITION p201906 VALUES LESS THAN (1561910400) ENGINE=InnoDB COMMENT='2019年06月',
PARTITION p201907 VALUES LESS THAN (1564588800) ENGINE=InnoDB COMMENT='2019年07月',
PARTITION p201908 VALUES LESS THAN (1567267200) ENGINE=InnoDB COMMENT='2019年08月',
PARTITION p201909 VALUES LESS THAN (1569859200) ENGINE=InnoDB COMMENT='2019年09月',
PARTITION p201910 VALUES LESS THAN (1572537600) ENGINE=InnoDB COMMENT='2019年10月',
PARTITION p201911 VALUES LESS THAN (1575129600) ENGINE=InnoDB COMMENT='2019年11月',
PARTITION p201912 VALUES LESS THAN (1577808000) ENGINE=InnoDB COMMENT='2019年12月',
PARTITION p202001 VALUES LESS THAN (1580486400) ENGINE=InnoDB COMMENT='2020年01月',
PARTITION p202002 VALUES LESS THAN (1582992000) ENGINE=InnoDB COMMENT='2020年02月',
PARTITION p202003 VALUES LESS THAN (1585670400) ENGINE=InnoDB COMMENT='2020年03月',
PARTITION p202004 VALUES LESS THAN (1588262400) ENGINE=InnoDB COMMENT='2020年04月',
PARTITION p202005 VALUES LESS THAN (1590940800) ENGINE=InnoDB COMMENT='2020年05月',
PARTITION p202006 VALUES LESS THAN (1593532800) ENGINE=InnoDB COMMENT='2020年06月',
PARTITION p202007 VALUES LESS THAN (1596211200) ENGINE=InnoDB COMMENT='2020年07月',
PARTITION p202008 VALUES LESS THAN (1598889600) ENGINE=InnoDB COMMENT='2020年08月',
PARTITION p202009 VALUES LESS THAN (1601481600) ENGINE=InnoDB COMMENT='2020年09月',
PARTITION p202010 VALUES LESS THAN (1604160000) ENGINE=InnoDB COMMENT='2020年10月',
PARTITION p202011 VALUES LESS THAN (1606752000) ENGINE=InnoDB COMMENT='2020年11月',
PARTITION p202012 VALUES LESS THAN (1609430400) ENGINE=InnoDB COMMENT='2020年12月',
PARTITION p202101 VALUES LESS THAN (1612108800) ENGINE=InnoDB COMMENT='2021年01月',
PARTITION p202102 VALUES LESS THAN (1614528000) ENGINE=InnoDB COMMENT='2021年02月',
PARTITION p202103 VALUES LESS THAN (1617206400) ENGINE=InnoDB COMMENT='2021年03月',
PARTITION p202104 VALUES LESS THAN (1619798400) ENGINE=InnoDB COMMENT='2021年04月',
PARTITION p202105 VALUES LESS THAN (1622476800) ENGINE=InnoDB COMMENT='2021年05月',
PARTITION p202106 VALUES LESS THAN (1625068800) ENGINE=InnoDB COMMENT='2021年06月',
PARTITION p202107 VALUES LESS THAN (1627747200) ENGINE=InnoDB COMMENT='2021年07月',
PARTITION p202108 VALUES LESS THAN (1630425600) ENGINE=InnoDB COMMENT='2021年08月',
PARTITION p202109 VALUES LESS THAN (1633017600) ENGINE=InnoDB COMMENT='2021年09月',
PARTITION p202110 VALUES LESS THAN (1635696000) ENGINE=InnoDB COMMENT='2021年10月',
PARTITION p202111 VALUES LESS THAN (1638288000) ENGINE=InnoDB COMMENT='2021年11月',
PARTITION p202112 VALUES LESS THAN (1640966400) ENGINE=InnoDB COMMENT='2021年12月',
PARTITION pmax VALUES LESS THAN MAXVALUE
);

CREATE TABLE IF NOT EXISTS `reply` (
  `id` int UNSIGNED NOT NULL AUTO_INCREMENT,
  `tid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '主题id',
  `uid` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '用户id',
  `content` text NOT NULL COMMENT '内容',
  `like` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '点赞',
  `instime` int(10) NOT NULL DEFAULT 0 COMMENT '添加时间',
  PRIMARY KEY (`id`,`instime`),
  KEY `tid` (`tid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='回复'
PARTITION BY RANGE (instime)
(
PARTITION p2018 VALUES LESS THAN (1546272000) ENGINE=InnoDB COMMENT='2018年',
PARTITION p201901 VALUES LESS THAN (1548950400) ENGINE=InnoDB COMMENT='2019年01月',
PARTITION p201902 VALUES LESS THAN (1551369600) ENGINE=InnoDB COMMENT='2019年02月',
PARTITION p201903 VALUES LESS THAN (1554048000) ENGINE=InnoDB COMMENT='2019年03月',
PARTITION p201904 VALUES LESS THAN (1556640000) ENGINE=InnoDB COMMENT='2019年04月',
PARTITION p201905 VALUES LESS THAN (1559318400) ENGINE=InnoDB COMMENT='2019年05月',
PARTITION p201906 VALUES LESS THAN (1561910400) ENGINE=InnoDB COMMENT='2019年06月',
PARTITION p201907 VALUES LESS THAN (1564588800) ENGINE=InnoDB COMMENT='2019年07月',
PARTITION p201908 VALUES LESS THAN (1567267200) ENGINE=InnoDB COMMENT='2019年08月',
PARTITION p201909 VALUES LESS THAN (1569859200) ENGINE=InnoDB COMMENT='2019年09月',
PARTITION p201910 VALUES LESS THAN (1572537600) ENGINE=InnoDB COMMENT='2019年10月',
PARTITION p201911 VALUES LESS THAN (1575129600) ENGINE=InnoDB COMMENT='2019年11月',
PARTITION p201912 VALUES LESS THAN (1577808000) ENGINE=InnoDB COMMENT='2019年12月',
PARTITION p202001 VALUES LESS THAN (1580486400) ENGINE=InnoDB COMMENT='2020年01月',
PARTITION p202002 VALUES LESS THAN (1582992000) ENGINE=InnoDB COMMENT='2020年02月',
PARTITION p202003 VALUES LESS THAN (1585670400) ENGINE=InnoDB COMMENT='2020年03月',
PARTITION p202004 VALUES LESS THAN (1588262400) ENGINE=InnoDB COMMENT='2020年04月',
PARTITION p202005 VALUES LESS THAN (1590940800) ENGINE=InnoDB COMMENT='2020年05月',
PARTITION p202006 VALUES LESS THAN (1593532800) ENGINE=InnoDB COMMENT='2020年06月',
PARTITION p202007 VALUES LESS THAN (1596211200) ENGINE=InnoDB COMMENT='2020年07月',
PARTITION p202008 VALUES LESS THAN (1598889600) ENGINE=InnoDB COMMENT='2020年08月',
PARTITION p202009 VALUES LESS THAN (1601481600) ENGINE=InnoDB COMMENT='2020年09月',
PARTITION p202010 VALUES LESS THAN (1604160000) ENGINE=InnoDB COMMENT='2020年10月',
PARTITION p202011 VALUES LESS THAN (1606752000) ENGINE=InnoDB COMMENT='2020年11月',
PARTITION p202012 VALUES LESS THAN (1609430400) ENGINE=InnoDB COMMENT='2020年12月',
PARTITION p202101 VALUES LESS THAN (1612108800) ENGINE=InnoDB COMMENT='2021年01月',
PARTITION p202102 VALUES LESS THAN (1614528000) ENGINE=InnoDB COMMENT='2021年02月',
PARTITION p202103 VALUES LESS THAN (1617206400) ENGINE=InnoDB COMMENT='2021年03月',
PARTITION p202104 VALUES LESS THAN (1619798400) ENGINE=InnoDB COMMENT='2021年04月',
PARTITION p202105 VALUES LESS THAN (1622476800) ENGINE=InnoDB COMMENT='2021年05月',
PARTITION p202106 VALUES LESS THAN (1625068800) ENGINE=InnoDB COMMENT='2021年06月',
PARTITION p202107 VALUES LESS THAN (1627747200) ENGINE=InnoDB COMMENT='2021年07月',
PARTITION p202108 VALUES LESS THAN (1630425600) ENGINE=InnoDB COMMENT='2021年08月',
PARTITION p202109 VALUES LESS THAN (1633017600) ENGINE=InnoDB COMMENT='2021年09月',
PARTITION p202110 VALUES LESS THAN (1635696000) ENGINE=InnoDB COMMENT='2021年10月',
PARTITION p202111 VALUES LESS THAN (1638288000) ENGINE=InnoDB COMMENT='2021年11月',
PARTITION p202112 VALUES LESS THAN (1640966400) ENGINE=InnoDB COMMENT='2021年12月',
PARTITION pmax VALUES LESS THAN MAXVALUE
);

-- 消息管理